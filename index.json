[{"content":"","date":"2025.8.14","externalUrl":null,"permalink":"/categories/","section":"åˆ†ç±»","summary":"","title":"åˆ†ç±»","type":"categories"},{"content":"","date":"2025.8.14","externalUrl":null,"permalink":"/categories/%E6%9C%8D%E5%8A%A1%E5%99%A8/","section":"åˆ†ç±»","summary":"","title":"æœåŠ¡å™¨","type":"categories"},{"content":"","date":"2025.8.14","externalUrl":null,"permalink":"/","section":"æ¬¢è¿æ¥åˆ°æˆ‘çš„ç§˜å¯†åŸºåœ°ï¼ğŸ‰","summary":"","title":"æ¬¢è¿æ¥åˆ°æˆ‘çš„ç§˜å¯†åŸºåœ°ï¼ğŸ‰","type":"page"},{"content":"acme.sh æ˜¯ä¸€ä¸ªå¼ºå¤§ä¸”ä¸ä¾èµ–ä»»ä½•ç‰¹å®šè¯­è¨€çš„ ACME å®¢æˆ·ç«¯ï¼Œéå¸¸é€‚åˆåœ¨æœåŠ¡å™¨ä¸Šç›´æ¥ä½¿ç”¨ï¼Œæ¥ä¸‹çš„æ“ä½œå‡åœ¨ Debian 12 æœåŠ¡å™¨ä¸Šæ“ä½œã€‚\nå‰ææ¡ä»¶ # åœ¨å¼€å§‹ä¹‹å‰ï¼Œéœ€è¦å‡†å¤‡å¦‚ä¸‹å‡ ç‚¹ï¼š\nåŸŸåï¼šä¾‹å¦‚ your_domain.comã€‚\nDNS é…ç½®ï¼šåŸŸåè§£æå·²ç»æ­£ç¡®æŒ‡å‘äº†ä½ çš„äº‘æœåŠ¡å™¨ã€‚\nNginx å·²å®‰è£…ï¼šæœåŠ¡å™¨å·²ç»å®‰è£…å¥½äº† Nginx ä¸”æ­£å¸¸è¿è¡Œã€‚\né˜²ç«å¢™å·²æ”¾è¡Œï¼šæœåŠ¡å™¨é˜²ç«å¢™å…è®¸ 80 (HTTP) å’Œ 443 (HTTPS) ç«¯å£çš„å…¥ç«™æµé‡ã€‚\nå®‰è£… acme.sh # é€šè¿‡ SSH ç™»å½•æœåŠ¡å™¨,æ‰§è¡Œacme.sh çš„å®˜æ–¹å®‰è£…è„šæœ¬ã€‚\n# å®‰è£… curl sudo apt update sudo apt install curl # æ‰§è¡Œå®‰è£…è„šæœ¬ï¼Œæ›¿æ¢æˆä½ è‡ªå·±çš„é‚®ç®± curl https://get.acme.sh | sh -s email=your_email@example.com å®‰è£…å®Œæˆåï¼Œé‡æ–°åŠ è½½ .bashrc æˆ–æ˜¯é‡æ–° SSH ç™»é™†æœåŠ¡å™¨æ¥å¯ç”¨ acme.sh å‘½ä»¤ï¼š\nsource ~/.bashrc ç”Ÿæˆé€šé…ç¬¦ SSL è¯ä¹¦ # ç¡®è®¤ DNS æä¾›å•†å¹¶è·å– API å¯†é’¥ # è¿™ä¸€æ­¥éœ€è¦ç™»å½•è´­ä¹°å’Œç®¡ç†åŸŸåè§£æçš„å¹³å°ï¼ˆä¾‹å¦‚ Cloudflare, GoDaddy, Namecheap, é˜¿é‡Œäº‘, è…¾è®¯äº‘ DNSPod ç­‰ï¼‰ã€‚acme.sh æ”¯æŒå‡ ä¹æ‰€æœ‰ä¸»æµçš„ DNS æä¾›å•†ã€‚å¯ä»¥åœ¨è¿™é‡ŒæŸ¥çœ‹å®Œæ•´çš„æ”¯æŒåˆ—è¡¨å’Œæ¯å®¶æä¾›å•†æ‰€éœ€çš„ API å¯†é’¥åç§°ï¼š acme.sh DNS API WIKI\nä»¥é˜¿é‡Œäº‘ä¸ºä¾‹ï¼š\nç™»å½•é˜¿é‡Œäº‘åˆ›å»º RAM ç”¨æˆ·ï¼Œè®¿é—®æ§åˆ¶ RAM æ§åˆ¶å°ã€‚ è¿›å…¥ RAM ç”¨æˆ·ç•Œé¢å¯»æ‰¾åˆ°åˆ›å»º AccessKey æŒ‰é’®ã€‚ ç‚¹å‡»åˆ›å»ºåï¼Œè·å– AccessKey ID å’Œ AccessKey Secretã€‚ åœ¨æœåŠ¡å™¨ä¸Šé…ç½® API å¯†é’¥ # åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œ export å‘½ä»¤ã€‚åç»­ç”³è¯·ç­¾å‘è¯ä¹¦æ—¶ï¼Œacme.sh ä¼šå°† API å¯†é’¥å‚¨å­˜åˆ°å½“å‰ç”¨æˆ·ç›®å½•ä¸‹çš„æ–‡ä»¶ä¸­ï¼š ~/.acme.sh/account.confã€‚\nä»¥é˜¿é‡Œäº‘ä¸ºä¾‹ï¼š\nexport Ali_Key=\u0026#34;åˆšåˆšè·å–çš„AccessKey ID\u0026#34; export Ali_Secret=\u0026#34;åˆšåˆšè·å–çš„AccessKey Secret\u0026#34; ç­¾å‘é€šé…ç¬¦è¯ä¹¦ # ç¡®ä¿ä½ çš„å‘½ä»¤ä¸­åŒ…å«äº†æ ¹åŸŸåå’Œé€šé…ç¬¦åŸŸåã€‚\nä½¿ç”¨ --dns å‚æ•°å¹¶æŒ‡å®šDNS æä¾›å•†ï¼ˆä¾‹å¦‚ é˜¿é‡Œäº‘ æ˜¯ dns_aliï¼‰ã€‚\nacme.sh --issue --dns dns_ali -d your_domain.com -d *.your_domain.com acme.sh ä¼šè‡ªåŠ¨è°ƒç”¨ DNS APIï¼Œåˆ›å»ºéªŒè¯æ‰€éœ€çš„ TXT è®°å½•ï¼Œç­‰å¾…å‡ ç§’è®© DNS è®°å½•ç”Ÿæ•ˆï¼Œç„¶åå®ŒæˆéªŒè¯å¹¶è·å–è¯ä¹¦ã€‚æˆåŠŸåï¼Œå®ƒä¼šè‡ªåŠ¨åˆ é™¤è¯¥ TXT è®°å½•ã€‚\nå®‰è£…ï¼ˆéƒ¨ç½²ï¼‰è¯ä¹¦åˆ° Nginx # acme.sh ç”Ÿæˆçš„è¯ä¹¦é»˜è®¤å­˜æ”¾åœ¨å…¶å†…éƒ¨ç›®å½• ~/.acme.sh/ ä¸­ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨ install-cert å‘½ä»¤å°†è¯ä¹¦â€œå®‰è£…â€åˆ°ä¸€ä¸ªç¨³å®šã€å¯å…¬å¼€è®¿é—®çš„ç›®å½•ï¼Œæ¯”å¦‚ /etc/nginx/ssl/ã€‚è¿™æ ·åšè¿˜æœ‰ä¸€ä¸ªå·¨å¤§çš„å¥½å¤„ï¼šacme.sh ä¼šè®°ä½å®‰è£…è·¯å¾„å’Œå‘½ä»¤ã€‚æœªæ¥å½“è¯ä¹¦è‡ªåŠ¨ç»­æœŸæˆåŠŸåï¼Œå®ƒä¼šè‡ªåŠ¨æŠŠæ–°è¯ä¹¦å®‰è£…åˆ°ç›¸åŒçš„ä½ç½®ï¼Œå¹¶è‡ªåŠ¨æ‰§è¡Œä½ æŒ‡å®šçš„å‘½ä»¤æ¥é‡è½½ Nginxï¼Œå®ç°å®Œå…¨è‡ªåŠ¨åŒ–ã€‚\nåˆ›å»ºç”¨äºå­˜æ”¾è¯ä¹¦çš„ç›®å½•ï¼š\nsudo mkdir -p /etc/nginx/ssl æ‰§è¡Œå‘½ä»¤ï¼Œå®‰è£…è¯ä¹¦åˆ°æŒ‡å®šç›®å½•ï¼š\nacme.sh --install-cert -d your_domain.com \\ --key-file /etc/nginx/ssl/your_domain.com/key.pem \\ --fullchain-file /etc/nginx/ssl/your_domain.com/cer.pem \\ --reloadcmd \u0026#34;service nginx reload\u0026#34; --install-cert -d your_domain.com: æŒ‡å®šè¦å®‰è£…å“ªä¸ªåŸŸåçš„è¯ä¹¦ã€‚\n--key-file å’Œ --fullchain-file: æŒ‡å®šè¯ä¹¦ç§é’¥å’Œå…¬é’¥é“¾çš„ç›®æ ‡è·¯å¾„ã€‚\n--reloadcmd \u0026quot;service nginx reload\u0026quot;: è¿™æ˜¯å®ç°è‡ªåŠ¨åŒ–çš„æ ¸å¿ƒã€‚acme.sh ä¼šè®°ä½è¿™ä¸ªå‘½ä»¤ï¼Œå¹¶åœ¨æœªæ¥æ¯æ¬¡æˆåŠŸç»­æœŸåè‡ªåŠ¨æ‰§è¡Œå®ƒï¼Œè®© Nginx åŠ è½½æ–°è¯ä¹¦ã€‚\né…ç½® Nginx ä½¿ç”¨ SSL è¯ä¹¦ # ç¼–è¾‘ç½‘ç«™é…ç½®æ–‡ä»¶ï¼š\nsudo nano /etc/nginx/sites-available/my-hugo-blog.conf ç”¨ä»¥ä¸‹å†…å®¹å®Œæ•´æ›¿æ¢åŸæ¥çš„é…ç½®ã€‚è¿™æ˜¯ä¸€ä¸ªç»è¿‡ä¼˜åŒ–çš„ã€åŒ…å« HTTP è‡ªåŠ¨è·³è½¬åˆ° HTTPS çš„é…ç½®æ¨¡æ¿ã€‚\n# å¼ºåˆ¶å°†æ‰€æœ‰ HTTP è¯·æ±‚é‡å®šå‘åˆ° HTTPS server { listen 80; listen [::]:80; server_name your_domain.com www.your_domain.com; return 301 https://$host$request_uri; } # HTTPS æœåŠ¡é…ç½® server { listen 443 ssl http2; listen [::]:443 ssl http2; server_name your_domain.com www.your_domain.com; # è¯ä¹¦æ–‡ä»¶è·¯å¾„ (å¿…é¡»ä¸ acme.sh install-cert å‘½ä»¤ä¸­çš„è·¯å¾„ä¸€è‡´) ssl_certificate /etc/nginx/ssl/your_domain.com.cer; ssl_certificate_key /etc/nginx/ssl/your_domain.com.key; # æå‡å®‰å…¨æ€§çš„ SSL/TLS é…ç½® ssl_protocols TLSv1.2 TLSv1.3; ssl_prefer_server_ciphers off; ssl_ciphers \u0026#34;EECDH+AESGCM:EDH+AESGCM:AES256+EECDH:AES256+EDH\u0026#34;; ssl_ecdh_curve secp384r1; ssl_session_cache shared:SSL:10m; ssl_session_timeout 10m; resolver 8.8.8.8 8.8.4.4 valid=300s; resolver_timeout 5s; # HSTS Header (å¼ºåˆ¶æµè§ˆå™¨ä½¿ç”¨ HTTPS) add_header Strict-Transport-Security \u0026#34;max-age=63072000; includeSubDomains; preload\u0026#34;; add_header X-Frame-Options DENY; add_header X-Content-Type-Options nosniff; add_header X-XSS-Protection \u0026#34;1; mode=block\u0026#34;; # ç½‘ç«™æ ¹ç›®å½•å’Œé»˜è®¤æ–‡ä»¶ root /var/www/my-hugo-blog; index index.html; location / { try_files $uri $uri/ =404; } } å®Œæˆå¹¶éªŒè¯ # ä¿å­˜ Nginx é…ç½®æ–‡ä»¶åï¼Œæµ‹è¯•é…ç½®è¯­æ³•å¹¶é‡å¯ Nginxï¼š\nsudo nginx -t sudo systemctl restart nginx ç°åœ¨ï¼Œæ‰“å¼€æµè§ˆå™¨è®¿é—® https://your_domain.comï¼Œèƒ½çœ‹åˆ°åœ°å€æ å‡ºç°äº†å®‰å…¨é”æ ‡å¿—ã€‚è¿™ä¸‹ç½‘ç«™ç°åœ¨ä¸ä»…å¯ç”¨äº† HTTPSï¼Œè€Œä¸”å…¶è¯ä¹¦å°†åœ¨æœªæ¥æ¯ 60 å¤©è‡ªåŠ¨ç»­æœŸä¸€æ¬¡ï¼Œæ— éœ€å†è¿›è¡Œä»»ä½•æ‰‹åŠ¨æ“ä½œã€‚\n","date":"2025.8.14","externalUrl":null,"permalink":"/posts/acme-auto-ssl/","section":"æ–‡ç« ","summary":"","title":"ä½¿ç”¨ acme.sh è‡ªåŠ¨åŒ–è·å–ç½‘ç«™ SSL è¯ä¹¦","type":"posts"},{"content":"","date":"2025.8.14","externalUrl":null,"permalink":"/posts/","section":"æ–‡ç« ","summary":"","title":"æ–‡ç« ","type":"posts"},{"content":"","date":"2025.8.14","externalUrl":null,"permalink":"/categories/%E7%9E%8E%E6%8A%98%E8%85%BE/","section":"åˆ†ç±»","summary":"","title":"çæŠ˜è…¾","type":"categories"},{"content":"ä½ å¥½ä¸–ç•Œï¼\n","date":"2025.8.12","externalUrl":null,"permalink":"/posts/hello-word/","section":"æ–‡ç« ","summary":"","title":"Hello Word","type":"posts"},{"content":"","date":"2025.8.12","externalUrl":null,"permalink":"/categories/%E7%A2%8E%E7%A2%8E%E5%BF%B5/","section":"åˆ†ç±»","summary":"","title":"ç¢ç¢å¿µ","type":"categories"},{"content":"","externalUrl":null,"permalink":"/authors/","section":"Authors","summary":"","title":"Authors","type":"authors"},{"content":"","externalUrl":null,"permalink":"/series/","section":"Series","summary":"","title":"Series","type":"series"},{"content":"","externalUrl":null,"permalink":"/tags/","section":"Tags","summary":"","title":"Tags","type":"tags"}]